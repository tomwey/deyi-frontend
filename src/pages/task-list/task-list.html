<!--
  Generated template for the TaskList page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>任务列表</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="refresh();">
        <ion-icon name="refresh"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content class="task-page">
  <!-- 进行中的任务 -->
    <div class="current-tasks">
      <ion-card *ngFor="let task of currentTasks">
        <ion-item (tap)="grabTask(task);">
          <ion-thumbnail item-left>
            <img [src]="task.icon" />
          </ion-thumbnail>
          <h2>{{task.name}}</h2>
          <p>剩{{task.stock}}份</p>
          <ion-note item-right>
            <span class="in-progress" *ngIf="!!task.in_progress">进行中</span>
            <span class="earn" *ngIf="!task.in_progress">+<span class="price">{{task.price}}</span>元</span>
          </ion-note>
        </ion-item>
      </ion-card>
    </div>
    <!-- 即将开始的任务 -->
    <div class="after-tasks" *ngIf="afterTasks.length > 0">
      <div class="caption">
        <h2 class="title">任务即将开始，总计13.9元，准时来抢！</h2>
      </div>
      <ion-card *ngFor="let task of afterTasks">
        <ion-item class="after-task">
          <ion-thumbnail item-left>
            <img [src]="task.icon" />
          </ion-thumbnail>
          <h2>{{task.name}}</h2>
          <p>剩{{task.stock}}份</p>
          <ion-note item-right>
            <span class="earn">+<span class="price">{{task.price}}</span>元</span>
          </ion-note>
        </ion-item>
      </ion-card>
    </div>

</ion-content>
